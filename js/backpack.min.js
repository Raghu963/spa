/*!
 * SPAjs v0.5.0 (https://github.com/docluv/spajs)
 * Copyright 2013-2014 Chris Love
 * Licensed under Apache (https://github.com/docluv/spajs/LICENSE)
 */
!function(a,b){"use strict";var c=function(a){var b=new c.fn.init(a);return b.settings=$.extend({},b.settings,a),b};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.3",updateViews:function(a){var b,c=document.querySelectorAll(a);for(b=0;b<c.length;b++)this.saveViewToStorage(c[b])},saveViewToStorage:function(a){"string"==typeof a&&(a=document.getElementById(a)),a&&(this.storeViewInfo(this.parseViewInfo(a)),!a.parentNode||a.className.search(this.settings.currentClass)>-1||a.parentNode.removeChild(a),a=b)},parseViewInfo:function(a){return{pageId:a.id,viewTitle:a.hasAttribute("spa-title")?a.getAttribute("spa-title"):this.settings.defaultTitle,tranistion:a.hasAttribute("spa-transition")?a.getAttribute("spa-transition"):"",content:a.outerHTML}},storeViewInfo:function(a){a=$.extend({},this.pageSettings,a),localStorage.setItem(this.settings.appName+"-"+a.pageId,JSON.stringify(a))},getViewInfo:function(b){var c,d=localStorage[this.settings.appName+"-"+b];return d||(c=document.getElementById(b),c&&(this.saveViewToStorage(c),d=a.localStorage[this.settings.appName+"-"+b])),d?JSON.parse(d):void 0},settings:{viewSelector:".spa-view",defaultTitle:"A Really Cool SPA App",deferredTimeKey:"lastDeferredTime",templateType:"text/x-mustache-template",currentClass:"current",appName:"AppX"},pageSettings:{pageId:"",content:""}},c.fn.init.prototype=c.fn,a.backpack=c}(window);